# Timezone
- name: "Setting timezone"
  timezone:
    hwclock: "local"
    name: "Europe/Madrid"

# Grub
- name: "Grub screen resolution"
  replace:
    path: "/etc/default/grub"
    regexp: '^GRUB_GFXMODE\=.*$'
    replace: 'GRUB_GFXMODE=1920x1080,auto'
  notify: "update-grub"
  become: true

# Ly
- name: "Configure ly service"
  service:
    name: ly
    enabled: true
  become: true

- name: "Download Dracula theme for GTK"
  unarchive:
    src: "https://github.com/dracula/gtk/archive/master.zip"
    dest: "/tmp/"
    remote_src: true
    # extra_opts: [--strip-components=1]
    creates: "/home/albert/.themes/Dracula/README.md"
  notify: copy-gtk-theme-temp

- name: "Apply GTK Dracula Theme 1"
  dconf:
    key: "/org/gnome/desktop/interface"
    value: "['gtk-theme', 'Dracula']"

- name: "Apply GTK Dracula Theme 2"
  dconf:
    key: "/org/gnome/desktop/wm/preferences"
    value: "['theme', 'Dracula']"

# Systemd

- name: "Add rc-local service"
  copy:
    src: "systemd/rc-local.service"
    dest: "/etc/systemd/system/rc-local.service"
  become: true

- name: "Configure rc-local service"
  service:
    name: "rc-local.service"
    enabled: true
  become: true

- name: "Copy rc.local file"
  copy:
    src: "systemd/rc.local"
    dest: "/etc/rc.local"
    mode: "o+x"
  become: true