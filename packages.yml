---
- name: "Install pacman system packages"
  pacman:
    name: "{{ packages.present.pacman.system }}"
    state: present

- name: "Install yay system packages"
  aur:
    use: yay
    name: "{{ packages.present.yay.system }}"
    state: present

- name: "Install pacman app packages"
  pacman:
    name: "{{ packages.present.pacman.apps }}"
    state: present
  when: install_apps

- name: "Install yay app packages"
  aur:
    use: yay
    name: "{{ packages.present.yay.apps }}"
    state: present
  when: install_apps

- name: "Remove packages"
  pacman:
    name: "{{ packages.absent }}"
    state: absent
